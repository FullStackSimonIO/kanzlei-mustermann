---
description: Haupt-Workflow für PayloadCMS Website Generierung
globs:
  - "src/**/*.{ts,tsx}"
  - ".cursor/commands/**/*.mdc"
  - "components/ui/**/*.tsx"
alwaysIncludeContext: true
---

# PayloadCMS Website Generator - Haupt-Workflow

Dieser Workflow orchestriert die automatische Generierung einer PayloadCMS Website basierend auf Relume Komponenten aus privatem GitHub Repository.

## Relume Repository Konfiguration

```typescript
const RELUME_CONFIG = {
  owner: "fullstacksimonio",        // Dein GitHub Username
  repo: "relume-components",      // Dein Relume Components Repo
  branch: "main",
  basePath: "relume"
}
```

## Workflow-Schritte

### 1. Initialisierung
**Führe aus:** `.cursor/commands/00-initialize.mdc`
- Projekt-Setup validieren
- GitHub MCP Connection testen
- Dependencies prüfen
- Git Branch erstellen
- Props validieren

### 2. Navbar erstellen
**Führe aus:** `.cursor/commands/01-create-navbar.mdc`
- Relume Navbar von GitHub laden (`relume/Header/{navbar}.tsx`)
- Analysieren & in MobileNav & DesktopNav aufteilen
- PayloadCMS config mit deutschen Labels erstellen
- ShadCN Buttons verwenden (keine Custom-Styles!)
- Migration durchführen
- Git Commit erstellen

### 3. Footer erstellen
**Führe aus:** `.cursor/commands/02-create-footer.mdc`
- Relume Footer von GitHub laden (`relume/Footer/{footer}.tsx`)
- In MobileFooter & DesktopFooter aufteilen
- PayloadCMS config erstellen
- ShadCN Buttons verwenden
- Migration durchführen
- Git Commit erstellen

### 4. Heroes erstellen
**Führe aus:** `.cursor/commands/03-create-heroes.mdc`
- Alle Hero Komponenten von GitHub laden
- **WICHTIG:** Namen normalisieren (Header1 → HeroHeader1)
- Pfad: `relume/Header/HeroHeader{N}.tsx`
- Jede Hero in eigenen Ordner konvertieren
- Shared config.ts mit conditionals erstellen
- ShadCN Button variants nutzen
- Migrationen durchführen
- Git Commit erstellen

### 5. Blocks erstellen
**Führe aus:** `.cursor/commands/04-create-blocks.mdc`
- Alle Block Komponenten von GitHub laden
- Auto-detect Category aus Namen
- Pfad: `relume/{Category}/{BlockName}.tsx`
- In Kategorien organisieren (Layout, CTA, FAQ, etc.)
- Jeder Block: Component.tsx, config.ts, index.ts
- ShadCN Buttons in allen Blocks
- Migrationen durchführen
- Git Commit erstellen

### 6. Finalisierung
**Führe aus:** `.cursor/commands/05-finalize.mdc`
- Alle Komponenten in payload.config.ts registrieren
- TypeScript Build testen
- Payload Admin testen
- Finale Migration erstellen
- Dokumentation generieren
- Tests ausführen
- Feature Branch in main mergen

## Verwendung

### Basis-Kommando

```bash
cursor run .cursor/tasks.mdc
```

### Mit Props (Beispiel)

```json
{
  "navbar": "Navbar1",
  "footer": "Footer1", 
  "heroes": ["Header1", "Header2", "HeroHeader5"],
  "blocks": ["Layout1", "CTA2", "FAQ5", "Contact1", "Testimonial3"]
}
```

## Props Schema

```typescript
interface BuildWebsiteProps {
  navbar: string;      // z.B. "Navbar1" → lädt relume/Header/Navbar1.tsx
  footer: string;      // z.B. "Footer1" → lädt relume/Footer/Footer1.tsx
  heroes: string[];    // z.B. ["Header1", "HeroHeader5"] → lädt relume/Header/HeroHeader*.tsx
  blocks: string[];    // z.B. ["CTA2", "FAQ5"] → lädt relume/{Category}/{Block}.tsx
}
```

## Relume Path Resolution

### Navbar
- Input: `"Navbar1"`
- Path: `relume/Header/Navbar1.tsx`

### Footer
- Input: `"Footer1"`
- Path: `relume/Footer/Footer1.tsx`

### Heroes (SPECIAL CASE!)
- Input: `"Header1"` → Normalisiert zu: `"HeroHeader1"`
- Input: `"HeroHeader5"` → Bleibt: `"HeroHeader5"`
- Path: `relume/Header/HeroHeader{N}.tsx`

### Blocks
- Input: `"CTA2"` → Category: "CTA"
- Path: `relume/CTA/CTA2.tsx`
- Input: `"FAQ5"` → Category: "FAQ"
- Path: `relume/FAQ/FAQ5.tsx`

## ShadCN Button Integration

**WICHTIG:** Alle Buttons verwenden NUR ShadCN Variants!

```tsx
import { Button } from '@/components/ui/button'

// Im Component.tsx
<Button variant={button.variant}>
  {button.text}
</Button>

// In config.ts
{
  name: 'variant',
  type: 'select',
  label: 'Button Stil',
  options: [
    { label: 'Standard', value: 'default' },
    { label: 'Outline', value: 'outline' },
    { label: 'Ghost', value: 'ghost' },
    { label: 'Link', value: 'link' },
  ],
  defaultValue: 'default',
}
```

## Erweiterbarkeit

Neue Schritte hinzufügen:
1. Neue Command-Datei in `.cursor/commands/` erstellen (z.B. `06-add-seo.mdc`)
2. Hier im Workflow-Ablauf referenzieren
3. Nummerierung beibehalten (06-, 07-, etc.)
4. Im Schema dokumentieren

Beispiele für zukünftige Erweiterungen:
- `06-add-seo.mdc` - SEO Felder & Metadata
- `07-add-analytics.mdc` - Analytics Integration
- `08-add-forms.mdc` - Form Blocks
- `09-add-ecommerce.mdc` - E-Commerce Blöcke

## GitHub MCP Requirements

Stelle sicher:
- [ ] GitHub Personal Access Token gesetzt (`GITHUB_TOKEN`)
- [ ] Token hat `repo` read access
- [ ] MCP Config in `.cursor/mcp-config.json`
- [ ] Relume Repo ist zugänglich

## Erfolgskriterien

- [ ] Alle Komponenten erfolgreich von GitHub geladen
- [ ] Relume Designs exakt beibehalten
- [ ] Nur ShadCN Button Variants verwendet
- [ ] Deutsche UX Labels überall
- [ ] Alle Migrationen erfolgreich
- [ ] TypeScript Build ohne Fehler
- [ ] Payload Admin funktioniert
- [ ] Git History sauber