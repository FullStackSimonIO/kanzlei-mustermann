---
description: Footer Komponente aus geklontem Relume Repo laden und konvertieren
---

# Schritt 2: Footer erstellen

## Input
- Build Config: `.temp/build-config.json`

## Aufgaben

### 1. Footer Code aus geklontem Repo laden

```bash
echo "üì• Lade Footer Code..."

BUILD_CONFIG=$(cat .temp/build-config.json)
FOOTER_NAME=$(echo $BUILD_CONFIG | jq -r '.components.footer.name')
FOOTER_PATH=$(echo $BUILD_CONFIG | jq -r '.components.footer.localPath')

if [ ! -f "$FOOTER_PATH" ]; then
  echo "‚ùå Footer nicht gefunden: $FOOTER_PATH"
  exit 1
fi

mkdir -p .temp/relume-components/footer
cp "$FOOTER_PATH" ".temp/relume-components/footer/${FOOTER_NAME}.tsx"

echo "‚úÖ Footer Code geladen: ${FOOTER_NAME}"
echo "   Quelle: $FOOTER_PATH"
```

### 2. Code analysieren

```typescript
const footerName = JSON.parse(
  fs.readFileSync('.temp/build-config.json', 'utf-8')
).components.footer.name;

const footerCode = fs.readFileSync(
  `.temp/relume-components/footer/${footerName}.tsx`,
  'utf-8'
);

const analysis = {
  name: footerName,
  hasLogo: footerCode.includes('logo') || footerCode.includes('Logo'),
  hasColumns: footerCode.includes('column') || footerCode.includes('grid'),
  hasSocialMedia: footerCode.includes('social') || footerCode.includes('Social'),
  hasCopyright: footerCode.includes('copyright') || footerCode.includes('¬©'),
  hasNewsletter: footerCode.includes('newsletter') || footerCode.includes('subscribe'),
  columnCount: (footerCode.match(/column/gi) || []).length,
};

fs.writeFileSync(
  '.temp/analysis/footer-analysis.json',
  JSON.stringify(analysis, null, 2)
);

console.log('‚úÖ Footer Analyse abgeschlossen');
console.log(JSON.stringify(analysis, null, 2));
```

### 3. MobileFooter.tsx erstellen

```typescript
// filepath: src/Footer/MobileFooter.tsx
'use client'

import React from 'react'
import type { Footer } from '@/payload-types'
import { Button } from '@/components/ui/button'
import { Media } from '@/components/Media'
import { CMSLink } from '@/components/CMSLink'
import { Facebook, Twitter, Instagram, Linkedin, Youtube, Github } from 'lucide-react'

interface MobileFooterProps {
  footer: Footer
}

const SocialIcon = ({ platform }: { platform: string }) => {
  const icons: Record<string, any> = {
    facebook: Facebook,
    twitter: Twitter,
    instagram: Instagram,
    linkedin: Linkedin,
    youtube: Youtube,
    github: Github,
  }
  const Icon = icons[platform.toLowerCase()] || Facebook
  return <Icon className="h-5 w-5" />
}

export const MobileFooter: React.FC<MobileFooterProps> = ({ footer }) => {
  return (
    <footer className="lg:hidden px-[5%] py-12">
      <div className="container">
        {footer.logo && (
          <div className="mb-8">
            <Media 
              resource={footer.logo} 
              className="h-8 w-auto"
            />
          </div>
        )}
        
        <div className="space-y-8">
          {footer.columns?.map((column, index) => (
            <div key={index}>
              {column.heading && (
                <h3 className="mb-4 text-sm font-semibold">
                  {column.heading}
                </h3>
              )}
              <ul className="space-y-3">
                {column.links?.map((link, linkIndex) => (
                  <li key={linkIndex}>
                    <CMSLink
                      {...link.link}
                      className="text-sm text-muted-foreground hover:text-foreground"
                    >
                      {link.label}
                    </CMSLink>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
        
        {footer.socialMedia && footer.socialMedia.length > 0 && (
          <div className="mt-8 flex gap-4">
            {footer.socialMedia.map((social, index) => (
              <Button
                key={index}
                variant="ghost"
                size="icon"
                asChild
              >
                <a 
                  href={social.url} 
                  target="_blank" 
                  rel="noopener noreferrer"
                  aria-label={social.platform}
                >
                  <SocialIcon platform={social.platform} />
                </a>
              </Button>
            ))}
          </div>
        )}
        
        {footer.copyright && (
          <div className="mt-8 pt-8 border-t text-sm text-muted-foreground">
            {footer.copyright}
          </div>
        )}
      </div>
    </footer>
  )
}
```

### 4. DesktopFooter.tsx erstellen

```typescript
// filepath: src/Footer/DesktopFooter.tsx
'use client'

import React from 'react'
import type { Footer } from '@/payload-types'
import { Button } from '@/components/ui/button'
import { Media } from '@/components/Media'
import { CMSLink } from '@/components/CMSLink'
import { Facebook, Twitter, Instagram, Linkedin, Youtube, Github } from 'lucide-react'

interface DesktopFooterProps {
  footer: Footer
}

const SocialIcon = ({ platform }: { platform: string }) => {
  const icons: Record<string, any> = {
    facebook: Facebook,
    twitter: Twitter,
    instagram: Instagram,
    linkedin: Linkedin,
    youtube: Youtube,
    github: Github,
  }
  const Icon = icons[platform.toLowerCase()] || Facebook
  return <Icon className="h-5 w-5" />
}

export const DesktopFooter: React.FC<DesktopFooterProps> = ({ footer }) => {
  return (
    <footer className="hidden lg:block px-[5%] py-16">
      <div className="container">
        <div className="grid grid-cols-12 gap-8">
          <div className="col-span-4">
            {footer.logo && (
              <Media 
                resource={footer.logo} 
                className="h-8 w-auto mb-6"
              />
            )}
            {footer.description && (
              <p className="text-sm text-muted-foreground">
                {footer.description}
              </p>
            )}
          </div>
          
          {footer.columns?.map((column, index) => (
            <div key={index} className="col-span-2">
              {column.heading && (
                <h3 className="mb-4 text-sm font-semibold">
                  {column.heading}
                </h3>
              )}
              <ul className="space-y-3">
                {column.links?.map((link, linkIndex) => (
                  <li key={linkIndex}>
                    <CMSLink
                      {...link.link}
                      className="text-sm text-muted-foreground hover:text-foreground transition-colors"
                    >
                      {link.label}
                    </CMSLink>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
        
        <div className="mt-12 pt-8 border-t flex items-center justify-between">
          {footer.copyright && (
            <p className="text-sm text-muted-foreground">
              {footer.copyright}
            </p>
          )}
          
          {footer.socialMedia && footer.socialMedia.length > 0 && (
            <div className="flex gap-2">
              {footer.socialMedia.map((social, index) => (
                <Button
                  key={index}
                  variant="ghost"
                  size="icon"
                  asChild
                >
                  <a 
                    href={social.url} 
                    target="_blank" 
                    rel="noopener noreferrer"
                    aria-label={social.platform}
                  >
                    <SocialIcon platform={social.platform} />
                  </a>
                </Button>
              ))}
            </div>
          )}
        </div>
      </div>
    </footer>
  )
}
```

### 5. PayloadCMS Config

```typescript
// filepath: src/Footer/config.ts
import type { GlobalConfig } from 'payload'
import { revalidateFooter } from './hooks/revalidateFooter'

export const Footer: GlobalConfig = {
  slug: 'footer',
  label: 'Fu√üzeile',
  fields: [
    {
      name: 'logo',
      type: 'upload',
      relationTo: 'media',
      label: 'Logo',
      admin: {
        description: 'Logo im Footer (optional)',
      },
    },
    {
      name: 'description',
      type: 'textarea',
      label: 'Beschreibung',
      admin: {
        description: 'Kurze Beschreibung neben dem Logo',
      },
    },
    {
      name: 'columns',
      type: 'array',
      label: 'Link-Spalten',
      minRows: 2,
      maxRows: 4,
      admin: {
        description: 'Spalten mit Links (typisch 2-4 Spalten)',
      },
      fields: [
        {
          name: 'heading',
          type: 'text',
          label: '√úberschrift',
          required: true,
        },
        {
          name: 'links',
          type: 'array',
          label: 'Links',
          fields: [
            {
              name: 'label',
              type: 'text',
              label: 'Beschriftung',
              required: true,
            },
            {
              name: 'link',
              type: 'group',
              label: 'Link',
              fields: [
                {
                  name: 'type',
                  type: 'select',
                  options: [
                    { label: 'Interne Seite', value: 'page' },
                    { label: 'Externe URL', value: 'url' },
                  ],
                  defaultValue: 'page',
                },
                {
                  name: 'page',
                  type: 'relationship',
                  relationTo: 'pages',
                  admin: {
                    condition: (_, siblingData) => siblingData?.type === 'page',
                  },
                },
                {
                  name: 'url',
                  type: 'text',
                  admin: {
                    condition: (_, siblingData) => siblingData?.type === 'url',
                  },
                },
              ],
            },
          ],
        },
      ],
    },
    {
      name: 'socialMedia',
      type: 'array',
      label: 'Social Media',
      admin: {
        description: 'Social Media Links und Icons',
      },
      fields: [
        {
          name: 'platform',
          type: 'select',
          label: 'Plattform',
          required: true,
          options: [
            { label: 'Facebook', value: 'facebook' },
            { label: 'Twitter', value: 'twitter' },
            { label: 'Instagram', value: 'instagram' },
            { label: 'LinkedIn', value: 'linkedin' },
            { label: 'YouTube', value: 'youtube' },
            { label: 'GitHub', value: 'github' },
          ],
        },
        {
          name: 'url',
          type: 'text',
          label: 'URL',
          required: true,
        },
      ],
    },
    {
      name: 'copyright',
      type: 'text',
      label: 'Copyright Text',
      defaultValue: '¬© 2024 Alle Rechte vorbehalten.',
      admin: {
        description: 'Copyright-Text am unteren Rand',
      },
    },
  ],
  hooks: {
    afterChange: [revalidateFooter],
  },
}
```

### 6. Hook erstellen

```bash
mkdir -p src/Footer/hooks
```

```typescript
// filepath: src/Footer/hooks/revalidateFooter.ts
import type { GlobalAfterChangeHook } from 'payload'
import { revalidateTag } from 'next/cache'

export const revalidateFooter: GlobalAfterChangeHook = ({ 
  doc, 
  req: { payload, context } 
}) => {
  if (!context.disableRevalidate) {
    payload.logger.info(`Revalidating footer`)
    revalidateTag('global_footer')
  }
  return doc
}
```

### 7. Index Export

```typescript
// filepath: src/Footer/index.tsx
'use client'

import { MobileFooter } from './MobileFooter'
import { DesktopFooter } from './DesktopFooter'
import type { Footer as FooterType } from '@/payload-types'

interface FooterProps {
  footer: FooterType
}

export const Footer: React.FC<FooterProps> = ({ footer }) => {
  return (
    <>
      <MobileFooter footer={footer} />
      <DesktopFooter footer={footer} />
    </>
  )
}
```

### 8. Migration erstellen

```bash
echo "üìù Erstelle Migration f√ºr Footer..."
npm run payload migrate:create -- --name add-footer-global

echo "üîÑ F√ºhre Migration aus..."
npm run payload migrate

if [ $? -eq 0 ]; then
  echo "‚úÖ Migration erfolgreich ausgef√ºhrt"
else
  echo "‚ùå Migration fehlgeschlagen"
  exit 1
fi
```

### 9. In payload.config.ts registrieren

```typescript
// filepath: src/payload.config.ts
// ...existing code...
import { Header } from './Header/config'
import { Footer } from './Footer/config'

export default buildConfig({
  // ...existing code...
  globals: [
    Header,
    Footer,
    // ...existing code...
  ],
})
```

### 10. Git Commit

```bash
FOOTER_NAME=$(cat .temp/build-config.json | jq -r '.components.footer.name')

git add src/Footer/
git add src/payload.config.ts
git add src/migrations/

git commit -m "feat(footer): add ${FOOTER_NAME} footer

Source: ${FOOTER_NAME}.tsx from cloned Relume repo
Components:
- MobileFooter.tsx (responsive mobile layout)
- DesktopFooter.tsx (desktop grid layout)
- config.ts with German UX labels
- revalidateFooter hook
- index.tsx export

Features:
‚úÖ Original Relume design preserved
‚úÖ All Tailwind classes maintained
‚úÖ ShadCN Button variants for social icons
‚úÖ Lucide icons (Facebook, Twitter, Instagram, etc.)
‚úÖ Responsive columns (stack mobile, grid desktop)
‚úÖ German PayloadCMS labels
‚úÖ Migration executed successfully
‚úÖ Registered in payload.config.ts

No custom styles - pure ShadCN components!"

echo "‚úÖ Git Commit erstellt"
```

## Erfolgskriterien

- [ ] Footer Code erfolgreich geladen
- [ ] Code Analyse durchgef√ºhrt
- [ ] MobileFooter.tsx erstellt
- [ ] DesktopFooter.tsx erstellt
- [ ] config.ts mit deutschen Labels
- [ ] Nur ShadCN Button Variants (keine Custom-Styles!)
- [ ] Lucide Icons f√ºr Social Media
- [ ] Migration erfolgreich
- [ ] In payload.config.ts registriert
- [ ] Git Commit erstellt

## N√§chster Schritt
`.cursor/commands/03-create-heroes.mdc`